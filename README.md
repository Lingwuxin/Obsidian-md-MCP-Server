# Obsidian Markdown MCP Server

ä¸€ä¸ªç”¨äºç®¡ç†SCPåŸºé‡‘ä¼šæ–‡æ¡£çš„MCP (Model Context Protocol) æœåŠ¡å™¨ï¼Œæä¾›æ–‡æ¡£è¯»å–ã€é“¾æ¥ç®¡ç†å’ŒåŒå‘é“¾æ¥ç”ŸæˆåŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ï¿½ SCPæ–‡æ¡£ç®¡ç†
- **æ–‡æ¡£è¯»å–**: æ ¹æ®SCPç¼–å·è¯»å–å®Œæ•´æ–‡æ¡£å†…å®¹
- **åˆ†è¡Œè¯»å–**: æ”¯æŒæŒ‰è¡Œå·èŒƒå›´è¯»å–æ–‡æ¡£ç‰‡æ®µ
- **æ™ºèƒ½ç›®å½•**: è‡ªåŠ¨æ ¹æ®SCPç¼–å·åˆ†é…åˆ°å¯¹åº”å­ç›®å½•
- **é“¾æ¥æå–**: è¯†åˆ«ç°æœ‰çš„Obsidianå’ŒMarkdownæ ¼å¼é“¾æ¥

### ğŸ› ï¸ æä¾›çš„å·¥å…·

#### 1. `get_scp_document`
æ ¹æ®SCPç¼–å·è·å–å¯¹åº”çš„æ–‡æ¡£å†…å®¹ã€‚

**å‚æ•°:**
- `scp_id` (str): SCPç¼–å·ï¼Œå¦‚scp-001ã€scp-5001

**è¿”å›å€¼:**
- å®Œæ•´çš„æ–‡æ¡£å†…å®¹å­—ç¬¦ä¸²

#### 2. `get_scp_document_lines`
æ ¹æ®SCPç¼–å·è·å–å¯¹åº”æ–‡æ¡£å†…å®¹çš„æŒ‡å®šè¡ŒèŒƒå›´ã€‚

**å‚æ•°:**
- `scp_id` (str): SCPç¼–å·ï¼Œå¦‚scp-001ã€scp-5001
- `start` (int): èµ·å§‹è¡Œå·
- `end` (int): ç»“æŸè¡Œå·

**è¿”å›å€¼:**
- æŒ‡å®šè¡ŒèŒƒå›´çš„æ–‡æ¡£å†…å®¹

#### 3. `put_links`
ä¿å­˜æ–‡æ¡£ä¸­æ‰¾åˆ°çš„æ½œåœ¨é“¾æ¥ç›®æ ‡åˆ—è¡¨ã€‚

**å‚æ•°:**
- `scp_id` (str): SCPç¼–å·ï¼Œå¦‚scp-001ã€scp-5001
- `links` (List[str]): æ–‡æ¡£ä¸­æ‰¾åˆ°çš„æ½œåœ¨é“¾æ¥ç›®æ ‡åˆ—è¡¨

**è¿”å›å€¼:**
- å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æˆåŠŸä¿å­˜é“¾æ¥æ•°æ®

#### 4. `extract_existing_links`
æå–æ–‡æ¡£ä¸­å·²å­˜åœ¨çš„é“¾æ¥ã€‚

**å‚æ•°:**
- `text` (str): Markdownæ–‡æ¡£çš„æ–‡æœ¬å†…å®¹

**è¿”å›å€¼:**
- ç°æœ‰é“¾æ¥åˆ—è¡¨

## ğŸ“¥ å®‰è£…å’Œè¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Python 3.11+
- MCP 1.13.1+
- uv (æ¨èçš„PythonåŒ…ç®¡ç†å·¥å…·)

### å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨ uv å®‰è£…ä¾èµ–
uv install
```

### ç¯å¢ƒé…ç½®
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
SCP_MD_LINKING_OUTPUT_DIR=./SCP-Linking
SCP_MD_UNLINK_OUTPUT_DIR=./SCP-Unlink
TRANSPORT=sse
PORT=8088
```

### è¿è¡ŒæœåŠ¡å™¨
```bash
# ä½¿ç”¨ uv è¿è¡Œ
uv run main.py
```

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•
```python
# è·å–SCPæ–‡æ¡£
document = get_scp_document("scp-173")

# è·å–æ–‡æ¡£çš„æŒ‡å®šè¡Œ
lines = get_scp_document_lines("scp-173", 10, 20)

# ä¿å­˜é“¾æ¥æ•°æ®
success = put_links("scp-173", ["SCP-096", "åŸºé‡‘ä¼š", "æ”¶å®¹"])

# æå–ç°æœ‰é“¾æ¥
existing_links = extract_existing_links(document)
```

### ç›®å½•ç»“æ„è¯´æ˜
- `SCP-Unlink/`: å­˜å‚¨åŸå§‹SCPæ–‡æ¡£çš„ç›®å½•
- `SCP-Linking/`: å­˜å‚¨é“¾æ¥åˆ†æç»“æœçš„ç›®å½•

æ–‡æ¡£æŒ‰ç¼–å·èŒƒå›´è‡ªåŠ¨åˆ†ç»„ï¼š
- `001-1000/`: SCP-001 åˆ° SCP-1000
- `1001-2000/`: SCP-1001 åˆ° SCP-2000
- ä»¥æ­¤ç±»æ¨...

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶
- **FastMCP Server**: åŸºäºMCPåè®®çš„æœåŠ¡å™¨æ¡†æ¶
- **File Management**: æ™ºèƒ½æ–‡ä»¶è·¯å¾„ç®¡ç†å’Œç›®å½•åˆ†ç»„
- **Link Processing**: é“¾æ¥æå–å’Œæ•°æ®æŒä¹…åŒ–

### ä¼ è¾“åè®®æ”¯æŒ
- **stdio**: æ ‡å‡†è¾“å…¥è¾“å‡º
- **sse**: Server-Sent Events (é»˜è®¤)
- **streamable-http**: HTTPæµå¼ä¼ è¾“

### ç›®å½•åˆ†ç»„ç®—æ³•
è‡ªåŠ¨æ ¹æ®SCPç¼–å·è®¡ç®—å¯¹åº”çš„å­ç›®å½•ï¼š
```python
# ç¤ºä¾‹ï¼šscp-1234 -> "1001-2000" ç›®å½•
# ç¤ºä¾‹ï¼šscp-173 -> "001-1000" ç›®å½•
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚


### é¡¹ç›®ç»“æ„
```
Obsidian-md-MCP-Server/
â”œâ”€â”€ main.py                    # ç¨‹åºå…¥å£
â”œâ”€â”€ pyproject.toml             # é¡¹ç›®é…ç½®
â”œâ”€â”€ src/obsidian_md_mcp/       
â”‚   â”œâ”€â”€ server.py              # MCPæœåŠ¡å™¨å®ç°
â”‚   â””â”€â”€ filepath_tool.py       # æ–‡ä»¶è·¯å¾„å·¥å…·
â””â”€â”€ test/                      # æµ‹è¯•æ–‡ä»¶
```

## ğŸ”— ç›¸å…³é¡¹ç›®

- [SCP-Obsidian](https://github.com/Lingwuxin/SCP-Obsidian) - ä¸»é¡¹ç›®
- [SCP-Obsidian-Markdown](https://github.com/Lingwuxin/SCP-Obsidian-Markdown) - åº”ç”¨é¡¹ç›®  
- [MCP](https://modelcontextprotocol.io/) - Model Context Protocol